extends layouts/datatable

block title
  title= "MultiScan scans by tags"

block body
  div
    h1 Tags
    div.btn-group
      button.btn.btn-default.dropdown-toggle(type='button', data-toggle='dropdown')
        | Show
        span.caret
      ul.dropdown-menu(role='menu')
        li
          a(href='../scans/tags') All
        li
          a(href='../scans/tags?group=checked') Checked
        li
          a(href='../scans/tags?group=staging') Staging
  hr
  div#loadingMessage Loading...
  table#resultTable(style='visibility: hidden')
    thead
      tr
        th tag
        th scans
        th previews
        th actions
    tfoot
      tr
        th tag
        th scans
        th previews
        th actions
    tbody
      each tag in tags
        tr
          td #{tag.name}
          td #{tag.scans.length}
          td(style='white-space: nowrap;')
            each scan in _.take(_.filter(tag.scans, function(x) { return x.previewUrl; }), 2)
              a(href=`${settings.scanFilesPath}/${scan.path}/${settings.outputs}/${scan.id}_obj_thumb_high.png`, target='_blank')
                img.lazy(data-src=`${scan.previewUrl}`, style='max-height: 50px;')
          
          td
            a.btn.btn-primary(href=`../scans/manage?tags=${tag.name}`, role='button', title="View scans") Scans

block footer
  script(src="../js/tags.js")
  script(type="text/javascript").
    initResultTable({});
